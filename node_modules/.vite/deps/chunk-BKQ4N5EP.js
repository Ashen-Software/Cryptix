import {
  ethereum
} from "./chunk-F7DA37ES.js";
import {
  UserWalletStatus
} from "./chunk-2SE7FSFE.js";

// node_modules/thirdweb/dist/esm/wallets/in-app/core/wallet/index.js
function isInAppWallet(wallet) {
  return wallet.id === "inApp" || wallet.id === "embedded";
}
async function connectInAppWallet(options, createOptions, connector) {
  const authResult = await connector.authenticate(options);
  const authAccount = authResult.user.account;
  if (createOptions && "smartAccount" in createOptions && (createOptions == null ? void 0 : createOptions.smartAccount)) {
    return convertToSmartAccount({
      client: options.client,
      authAccount,
      smartAccountOptions: createOptions.smartAccount,
      chain: options.chain
    });
  }
  return [authAccount, options.chain || ethereum];
}
async function autoConnectInAppWallet(options, createOptions, connector) {
  const user = await getAuthenticatedUser(connector);
  if (!user) {
    throw new Error("Failed to authenticate user.");
  }
  const authAccount = user.account;
  if (createOptions && "smartAccount" in createOptions && (createOptions == null ? void 0 : createOptions.smartAccount)) {
    return convertToSmartAccount({
      client: options.client,
      authAccount,
      smartAccountOptions: createOptions.smartAccount,
      chain: options.chain
    });
  }
  return [authAccount, options.chain || ethereum];
}
async function convertToSmartAccount(options) {
  const [{ smartWallet }, { connectSmartWallet }] = await Promise.all([
    import("./smart-wallet-744NIQI3.js"),
    import("./smart-JVW2V5FI.js")
  ]);
  const sa = smartWallet(options.smartAccountOptions);
  return connectSmartWallet(sa, {
    client: options.client,
    personalAccount: options.authAccount,
    chain: options.chain
  }, options.smartAccountOptions);
}
async function getAuthenticatedUser(connector) {
  const user = await connector.getUser();
  switch (user.status) {
    case UserWalletStatus.LOGGED_IN_WALLET_INITIALIZED: {
      return user;
    }
  }
  return void 0;
}

export {
  isInAppWallet,
  connectInAppWallet,
  autoConnectInAppWallet
};
//# sourceMappingURL=chunk-BKQ4N5EP.js.map

{
  "version": 3,
  "sources": ["../../thirdweb/src/analytics/track.ts", "../../thirdweb/src/utils/tiny-emitter.ts", "../../thirdweb/src/wallets/wallet-emitter.ts"],
  "sourcesContent": ["import type { ThirdwebClient } from \"../client/client.js\";\nimport { getClientFetch } from \"../utils/fetch.js\";\n\nconst ANALYTICS_ENDPOINT = \"https://c.thirdweb.com/event\";\n\n/**\n * @internal\n */\nexport function trackConnect(args: {\n  client: ThirdwebClient;\n  walletType: string;\n  walletAddress: string;\n}) {\n  const { client, walletType, walletAddress } = args;\n  track(client, {\n    source: \"connectWallet\",\n    action: \"connect\",\n    walletType,\n    walletAddress,\n  });\n}\n\n/**\n * @internal\n */\nfunction track(client: ThirdwebClient, data: object) {\n  const fetch = getClientFetch(client);\n\n  fetch(ANALYTICS_ENDPOINT, {\n    method: \"POST\",\n    body: JSON.stringify(data, (_key, value) => {\n      if (typeof value === \"bigint\") {\n        return value.toString();\n      }\n      return value;\n    }),\n  });\n}\n", "type GenericEmitterType = {\n  [key: string]: unknown;\n};\n\nexport type Emitter<T extends GenericEmitterType> = {\n  subscribe<K extends keyof T>(event: K, cb: (data: T[K]) => void): () => void;\n  emit<K extends keyof T>(event: K, data: T[K]): void;\n};\n\n/**\n * Creates an emitter object that allows subscribing to events and emitting events.\n * @returns An emitter object with `subscribe` and `emit` methods.\n * @template TEmitter - The type of the emitter.\n * @example\n * ```ts\n * const emitter = createEmitter<{\n *  event1: string;\n * event2: number;\n * }>();\n *\n * emitter.subscribe(\"event1\", (data) => {\n * console.log(data); // \"hello\"\n * });\n *\n * emitter.emit(\"event1\", \"hello\");\n * ```\n */\nexport function createEmitter<\n  const TEmitter extends GenericEmitterType,\n>(): Emitter<TEmitter> {\n  const subsribers = new Map<\n    keyof TEmitter,\n    // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\n    Set<(data: any) => void>\n  >();\n\n  return {\n    subscribe(event, cb) {\n      if (!subsribers.has(event)) {\n        subsribers.set(event, new Set([cb]));\n      } else {\n        subsribers.get(event)?.add(cb);\n      }\n\n      return () => {\n        const subscribers = subsribers.get(event);\n        if (subscribers) {\n          subscribers.delete(cb);\n        }\n      };\n    },\n    emit(event, data) {\n      const subscribers = subsribers.get(event);\n      if (subscribers) {\n        for (const cb of subscribers) {\n          cb(data);\n        }\n      }\n    },\n  };\n}\n", "import type { Chain } from \"../chains/types.js\";\nimport { type Emitter, createEmitter } from \"../utils/tiny-emitter.js\";\nimport type { Account } from \"./interfaces/wallet.js\";\nimport type { WalletAutoConnectionOption, WalletId } from \"./wallet-types.js\";\n\nexport type WalletEmitterEvents<TWalletId extends WalletId> = {\n  accountChanged: Account;\n  accountsChanged: string[];\n  disconnect?: never;\n  chainChanged: Chain;\n  onConnect: WalletAutoConnectionOption<TWalletId>;\n};\n\nexport type WalletEmitter<TWalletId extends WalletId> = Emitter<\n  WalletEmitterEvents<TWalletId>\n>;\n\n/**\n\n * @internal\n */\nexport function createWalletEmitter<const TWalletId extends WalletId>() {\n  return createEmitter<WalletEmitterEvents<TWalletId>>();\n}\n"],
  "mappings": ";;;;;AAGA,IAAM,qBAAqB;AAKrB,SAAU,aAAa,MAI5B;AACC,QAAM,EAAE,QAAQ,YAAY,cAAa,IAAK;AAC9C,QAAM,QAAQ;IACZ,QAAQ;IACR,QAAQ;IACR;IACA;GACD;AACH;AAKA,SAAS,MAAM,QAAwB,MAAY;AACjD,QAAM,QAAQ,eAAe,MAAM;AAEnC,QAAM,oBAAoB;IACxB,QAAQ;IACR,MAAM,KAAK,UAAU,MAAM,CAAC,MAAM,UAAS;AACzC,UAAI,OAAO,UAAU,UAAU;AAC7B,eAAO,MAAM,SAAQ;MACvB;AACA,aAAO;IACT,CAAC;GACF;AACH;;;ACVM,SAAU,gBAAa;AAG3B,QAAM,aAAa,oBAAI,IAAG;AAM1B,SAAO;IACL,UAAU,OAAO,IAAE;AA5BvB;AA6BM,UAAI,CAAC,WAAW,IAAI,KAAK,GAAG;AAC1B,mBAAW,IAAI,OAAO,oBAAI,IAAI,CAAC,EAAE,CAAC,CAAC;MACrC,OAAO;AACL,yBAAW,IAAI,KAAK,MAApB,mBAAuB,IAAI;MAC7B;AAEA,aAAO,MAAK;AACV,cAAM,cAAc,WAAW,IAAI,KAAK;AACxC,YAAI,aAAa;AACf,sBAAY,OAAO,EAAE;QACvB;MACF;IACF;IACA,KAAK,OAAO,MAAI;AACd,YAAM,cAAc,WAAW,IAAI,KAAK;AACxC,UAAI,aAAa;AACf,mBAAW,MAAM,aAAa;AAC5B,aAAG,IAAI;QACT;MACF;IACF;;AAEJ;;;ACvCM,SAAU,sBAAmB;AACjC,SAAO,cAAa;AACtB;",
  "names": []
}

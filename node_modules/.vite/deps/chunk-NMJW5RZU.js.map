{
  "version": 3,
  "sources": ["../../thirdweb/src/storage/download.ts"],
  "sourcesContent": ["import { getClientFetch } from \"../utils/fetch.js\";\nimport { type ResolveSchemeOptions, resolveScheme } from \"../utils/ipfs.js\";\nimport type { Prettify } from \"../utils/type-utils.js\";\n\nexport type DownloadOptions = Prettify<\n  ResolveSchemeOptions & {\n    requestTimeoutMs?: number;\n  }\n>;\n\n/**\n * Downloads a file from the specified URI.\n * @param options - The download options.\n * @returns A Promise that resolves to the downloaded file.\n * @throws An error if the URI scheme is invalid.\n * @example\n * ```ts\n * import { download } from \"thirdweb/storage\";\n * const file = await download({\n *  client,\n *  uri: \"ipfs://Qm...\",\n * });\n * ```\n * @storage\n */\nexport async function download(options: DownloadOptions) {\n  let url: string;\n  if (options.uri.startsWith(\"ar://\")) {\n    const { resolveArweaveScheme } = await import(\"../utils/arweave.js\");\n    url = resolveArweaveScheme(options);\n  } else {\n    url = resolveScheme(options);\n  }\n  const res = await getClientFetch(options.client)(url, {\n    keepalive: options.client.config?.storage?.fetch?.keepalive,\n    headers: options.client.config?.storage?.fetch?.headers,\n    requestTimeoutMs: options.client.config?.storage?.fetch?.requestTimeoutMs,\n  });\n  if (!res.ok) {\n    res.body?.cancel();\n    throw new Error(`Failed to download file: ${res.statusText}`);\n  }\n  return res;\n}\n"],
  "mappings": ";;;;;;;;AAyBA,eAAsB,SAAS,SAAwB;AAzBvD;AA0BE,MAAI;AACJ,MAAI,QAAQ,IAAI,WAAW,OAAO,GAAG;AACnC,UAAM,EAAE,qBAAoB,IAAK,MAAM,OAAO,uBAAqB;AACnE,UAAM,qBAAqB,OAAO;EACpC,OAAO;AACL,UAAM,cAAc,OAAO;EAC7B;AACA,QAAM,MAAM,MAAM,eAAe,QAAQ,MAAM,EAAE,KAAK;IACpD,YAAW,yBAAQ,OAAO,WAAf,mBAAuB,YAAvB,mBAAgC,UAAhC,mBAAuC;IAClD,UAAS,yBAAQ,OAAO,WAAf,mBAAuB,YAAvB,mBAAgC,UAAhC,mBAAuC;IAChD,mBAAkB,yBAAQ,OAAO,WAAf,mBAAuB,YAAvB,mBAAgC,UAAhC,mBAAuC;GAC1D;AACD,MAAI,CAAC,IAAI,IAAI;AACX,cAAI,SAAJ,mBAAU;AACV,UAAM,IAAI,MAAM,4BAA4B,IAAI,UAAU,EAAE;EAC9D;AACA,SAAO;AACT;",
  "names": []
}
